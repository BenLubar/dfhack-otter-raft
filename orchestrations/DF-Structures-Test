set $VersionNumber = 0.44.06;

for server LinuxBuilder
{
    set $NormalizedVersion = $Replace($VersionNumber, .0, .);

    foreach $OSArch in @(win32, win64, linux32, linux64, osx32, osx64)
    {
        call DFHack-Universal-Package
        (
            GroupName: dwarffortress/core,
            PackageName: $OSArch,
            NormalizedVersion: $NormalizedVersion,
            OutputPath: $WorkingDirectory/$OSArch,
            FeedName: DwarfFortress
        );
    }

    call DFHack-Git
    (
        RepoID: DFHack-df-structures,
        Repository: https://github.com/DFHack/df-structures.git,
        Directory: $WorkingDirectory/df-structures,
        Branch: master
    );

    call DFHack-Git
    (
        RepoID: jjyg-df_misc,
        Repository: https://github.com/jjyg/df_misc.git,
        Directory: $WorkingDirectory/df_misc,
        Branch: master
    );

    call DFHack-Git
    (
        RepoID: jjyg-metasm,
        Repository: https://github.com/jjyg/metasm.git,
        Directory: $WorkingDirectory/metasm,
        Branch: master
    );

    SHCall dfhack::dfhack-structures-update
    (
        Arguments: '"$WorkingDirectory" "$VersionNumber"',
        Verbose: true,
        ErrorOutputLogLevel: Debug
    );
}
